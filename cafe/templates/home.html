<!DOCTYPE html>

{% extends "base.html" %}

<html>
{% block head_content %}
    <title>Home</title>
    <head>
      <script src="http://maps.google.com/maps/api/js?sensor=false"
          type="text/javascript"></script>
    </head>
{% endblock %}

{% block content %}
{#    <div class="cafelist">#}
{#        <ul type="none">#}
{#            {% for cafe in object_list %}#}
{#            <li class="cafe">#}
{#                <div class="cafename">{{ cafe.name }}</div>#}
{#                <div class="cafedescription">{{ cafe.main_image_url }}</div>#}
{#                <div class="cafepic"><img href="{{ cafe.main_image_url }}"></div>#}
{#            </li>#}
{#            {% endfor %}#}
{#        </ul>#}
{#    </div>#}
{#    <div class="map"></div>#}
{#    <script>#}
{#        function myMap() {#}
{#            var mapCanvas = document.getElementById("map");#}
{#            var mapOptions = {#}
{#                center: new google.maps.LatLng(51.5, -0.2), zoom: 10#}
{#            };#}
{#            var map = new google.maps.Map(mapCanvas, mapOptions);#}
{#        }#}
{#    </script>#}
{##}
{#    <script async defer#}
{#            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBX0viabwNSiTN8zjNi9HFOKK7wqfdJbv4&callback=myMap"#}
{#            type="text/javascript"></script>#}



    <div id="map" style="width: 500px; height: 400px;"></div>

  <script type="text/javascript">
      var cafes = [
          {% for cafe in cafe_list %}
            [' {{ cafe.name }} ',{{  cafe.latitude}} , {{  cafe.longitude }} ,],
          {% endfor %}
    ];
      for cafe in cafes{
          someText = someText.replace(/(\r\n|\n|\r)/gm,"");
      }


    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: new google.maps.LatLng(40.44407301696414, -80.02870559692383),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < cafes.length; i++) {
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(cafes[i][1], cafes[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
        return function() {
          infowindow.setContent(cafes[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
            google.maps.event.addListener(marker, 'mouseout', (function(marker, i) {
        return function() {
          infowindow.close()
        }
      })(marker, i));

    }
  </script>
{% endblock %}

</html>